<html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Neema's Recipes</title>
<script src="//ajax.googleapis.com/ajax/libs/angularjs/1.3.3/angular.min.js"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/angular.js/1.3.3/angular-route.min.js"></script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/css/bootstrap.min.css" integrity="sha384-2hfp1SzUoho7/TsGGGDaFdsuuDL0LX2hnUp6VkX3CUQ2K4K+xjboZdsXyp4oUHZj" crossorigin="anonymous">

<script src="script.js"></script>
<style>
    .cimg{width:100%;height:200px;}
    .bg-img{-webkit-background-size: cover;
              -moz-background-size: cover;
              -o-background-size: cover;
              background-size: cover;
        background-position: 50% 50%;
        background-repeat: no-repeat;
    }

</style>

<link href="/ui/style.css" rel="stylesheet" />

</head>
<body>


<nav class="navbar navbar-static-top navbar-dark bg-inverse">
      <a class="navbar-brand" href="/">Neemas</a>
      <ul class="nav navbar-nav">
        <li class="nav-item active">
          <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#">Contact</a>
        </li>
      </ul>
    </nav>






  
    <div class="container">
      <div class="articleContainer"></div>
    <div class="row">
    
    <div class="col-md-6">
                <div class="widget-area no-padding blank">
                <div class="status-upload">
                  <form id="commentForm">
                    <textarea placeholder="What do you think?" id="commentBox" name="comment"></textarea>
                    <!-- <ul>
                      <li><a title="" data-toggle="tooltip" data-placement="bottom" data-original-title="Audio"><i class="fa fa-music"></i></a></li>
                      <li><a title="" data-toggle="tooltip" data-placement="bottom" data-original-title="Video"><i class="fa fa-video-camera"></i></a></li>
                      <li><a title="" data-toggle="tooltip" data-placement="bottom" data-original-title="Sound Record"><i class="fa fa-microphone"></i></a></li>
                      <li><a title="" data-toggle="tooltip" data-placement="bottom" data-original-title="Picture"><i class="fa fa-picture-o"></i></a></li>
                    </ul> -->
                    <button type="submit" class="btn btn-success green comment" id="commentBtn"><i class="fa fa-share"></i> Comment</button>
                    <p id="cmtInfo" style="display: none; font-size: 13px;">Please login to post comment...</p>
                    <input type="hidden" name="uid" value="">
                  </form>

                </div><!-- Status Upload  -->
              </div><!-- Widget Area -->
            </div>
        
    </div>  
    </div>
    
         


  

<!-- jQuery first, then Tether, then Bootstrap JS. -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.0.0/jquery.min.js" integrity="sha384-THPy051/pYDQGanwU6poAc/hOdQxjnOEXzbT+OuUAFqNqFjL+4IGLBgCJC3ZOShY" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.2.0/js/tether.min.js" integrity="sha384-Plbmg8JY28KFelvJVai01l8WyZzrYWG825m+cZ0eDDS1f7d/js6ikvy1+X+guPIB" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.4/js/bootstrap.min.js" integrity="VjEeINv9OSwtWFLAtmc4JCtEJXXBub00gtSnszmspDLCtC0I4z4nqz7rEFbIZLLU" crossorigin="anonymous"></script>
    <script type="text/javascript">

            articleId = window.location.href.substr('http://localhost:8080/article/'.length)
      function getParameterByName(name, url) {
          if (!url) {
            url = window.location.href;
          }
          alert(url);
          name = name.replace(/[\[\]]/g, "\\$&");
          var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
              results = regex.exec(url);
          if (!results) return null;
          if (!results[2]) return '';
          return decodeURIComponent(results[2].replace(/\+/g, " "));
      }
      //var articleId = getParameterByName('id');
      $( ".articleContainer" ).load( "/getArticle/"+articleId );
      $( ".commentsContainer" ).load( "/getComments/"+articleId );
       $(document).ready(function(){

        var uid;
        $.ajax({
            url: '/checkSession',
            type: 'get',
            dataType: 'json',
            success: function(data) {
                       console.log(data);
                       if(data.status != 'FAIL'){
                        $('.login_lnk').hide();
                        $('.logout_lnk').show();
                        uid = data.status;
                        $('input[name="uid"]').val(uid);
                       }
                       else{
                        $("#commentBtn").prop("disabled",true);
                        $("#cmtInfo").show();

                       }
                     }
        });

         


        $('#commentBtn').click(function(event){
          event.preventDefault();
          $.ajax({
            url: '/postComment',
            type: 'post',
            dataType: 'json',
            data: $('#commentForm').serialize(),
            success: function(data) {
                       console.log(data);
                       if(data.status == 'OK'){
                        //$('#regForm').submit();
                       }
                     }
        });
        });
       });
    </script>
</body>
</html>
